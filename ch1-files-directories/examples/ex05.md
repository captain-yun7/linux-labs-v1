### ex05 : 텍스트 가공하여 보고서 만들기 (sed, awk, 파이프)

#### 1\. 실습 환경 (ex01의 web_access.log 파일 사용)

```bash
# [복습] - 에러가 발생한 로그만 필터링합니다.
grep -E "404|500" web_access.log
```

#### 2\. `sed`로 불필요한 정보 치환하기

```bash
# [sed 치환] - 필터링된 결과에서 '- -' 부분을 제거하여 깔끔하게 만듭니다.
# s/원본/바꿀내용/g 는 원본을 바꿀내용으로 모두(g) 바꾸라는 의미입니다.
grep -E "404|500" web_access.log | sed "s/ - - / /g"
```

#### 3\. `awk`로 원하는 열(column)만 추출하기

`awk`는 공백을 기준으로 텍스트를 여러 열로 나누어 처리하는 데 강력합니다. `$1`은 첫 번째 열, `$2`는 두 번째 열을 의미합니다.

```bash
# [awk로 특정 열 추출] - 필터링된 결과에서 IP주소($1)와 요청 경로($7), 상태 코드($9)만 뽑아냅니다.
grep -E "404|500" web_access.log | awk '{print $1, $7, $9}'
```

#### 4\. 파이프로 명령어 연결하여 최종 보고서 만들기

```bash
# [최종 보고서] - "문제 발생 IP: [IP주소], 요청 경로: [경로], 상태 코드: [코드]" 형식으로 출력합니다.
# 1. 에러 로그만 필터링하고 (grep)
# 2. 원하는 열만 추출한 뒤 (awk)
# 3. awk의 print 기능을 이용해 최종 문장을 만듭니다.
grep -E "404|500" web_access.log | awk '{print "문제 발생 IP: " $1 ", 요청 경로: " $7 ", 상태 코드: " $9}'
```

#### 5\. (심화) `cut`으로 특정 글자 단위로 자르기

`cut`은 공백이 아닌 특정 구분자(-, :, " 등)로 필드를 자를 때 유용합니다.

```bash
# [cut으로 날짜만 추출] - 로그에서 날짜 부분만 잘라냅니다.
# -d'[' : '[' 를 구분자로 사용
# -f2 : 구분자로 나뉜 조각 중 2번째 조각을 선택
cat web_access.log | cut -d'[' -f2 | cut -d':' -f1
``` 