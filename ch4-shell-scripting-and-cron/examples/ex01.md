### ex01 : 주요 디렉토리 백업 스크립트 만들기

#### 1\. 스크립트 기본 구조 및 변수 설정

`backup.sh` 파일을 만들고 실행 권한을 부여합니다. (`touch backup.sh && chmod +x backup.sh`)
이 스크립트는 지정된 디렉토리들을 하나의 압축 파일로 만드는 역할을 합니다.

```bash
#!/bin/bash

# [상수 변수] - 백업을 저장할 기본 경로와 파일 이름 형식을 지정합니다.
# `date +%Y%m%d`는 '20250713' 과 같은 형식으로 현재 날짜를 출력합니다.
BACKUP_BASE_DIR="/home/ubuntu/backups"
FILENAME="backup-$(date +%Y%m%d).tar.gz"

# [배열 변수] - 백업할 디렉토리 목록을 배열로 관리합니다.
# 중요한 설정 파일과 소스 코드 디렉토리를 가정합니다.
TARGET_DIRS=("/etc/nginx" "/var/www/my-app" "/home/ubuntu/scripts")

# --- 스크립트 실행 시작 ---
echo "백업을 시작합니다..."
```

#### 2\. 반복문을 이용한 디렉토리 존재 여부 확인

백업을 시도하기 전에, 대상 디렉토리가 실제로 존재하는지 먼저 확인하는 것이 안전합니다. `for` 반복문과 `if` 조건문을 사용합니다.

```bash
# ... (변수 설정 부분 아래에 이어서 작성) ...

# [반복문과 조건문]
for DIR in "${TARGET_DIRS[@]}"; do
  # -d는 디렉토리가 존재하는지 확인하는 조건입니다.
  # !는 조건의 결과를 반대로 뒤집습니다. (Not)
  if [ ! -d "$DIR" ]; then
    echo "[에러] 백업 대상 디렉토리 '$DIR'이(가) 존재하지 않습니다. 스크립트를 종료합니다."
    exit 1 # 스크립트를 비정상 종료시킵니다.
  fi
done
```

#### 3\. 백업 실행 및 완료 메시지

`tar` 명령어를 사용하여 지정된 모든 디렉토리를 하나의 파일로 압축합니다.

```bash
# ... (반복문 아래에 이어서 작성) ...

# [백업 디렉토리 생성] - -p 옵션은 경로의 중간 디렉토리가 없으면 자동으로 만들어줍니다.
mkdir -p $BACKUP_BASE_DIR

# [압축 실행] - c(생성), v(과정보여주기), z(gzip압축), f(파일로) 옵션을 사용합니다.
# ${TARGET_DIRS[@]}는 배열의 모든 요소를 공백으로 구분하여 나열합니다.
tar -cvzf "${BACKUP_BASE_DIR}/${FILENAME}" "${TARGET_DIRS[@]}"

echo "백업이 성공적으로 완료되었습니다."
echo "백업 파일: ${BACKUP_BASE_DIR}/${FILENAME}"
```

#### 4\. 전체 스크립트 및 실행

```bash
# [스크립트 실행]
./backup.sh
``` 