### ex02 : 외부와 통신하기 (ping, dig)

#### 1\. 특정 서버까지 네트워크가 살아있는지 확인 (`ping`)

`ping`은 지정한 대상에게 작은 데이터 패킷(ICMP)을 보내고 응답이 오는지 확인하는, 가장 기본적인 네트워크 진단 도구입니다.

```bash
# [google.com에 핑 보내기] - Ctrl+C를 누를 때까지 계속 보냅니다.
ping google.com

# [-c 옵션으로 4번만 보내기]
ping -c 4 google.com
```
- **time=... ms**: 응답을 받는 데 걸린 시간입니다. 이 시간이 너무 길면 네트워크 지연이 있다는 의미입니다.
- **"Destination Host Unreachable"**: 내 서버에서 상대 서버로 가는 경로를 찾지 못했다는 의미입니다. (예: 게이트웨이 문제)
- **응답이 전혀 없음**: 상대 서버가 꺼져있거나, 중간의 방화벽이 ICMP 패킷을 차단하고 있을 가능성이 높습니다.

#### 2\. 도메인 이름의 IP 주소 확인하기 (`dig`, `nslookup`)

우리는 `google.com` 처럼 사람이 읽기 쉬운 도메인 이름을 사용하지만, 컴퓨터는 IP 주소로 통신합니다. 도메인 이름을 IP 주소로 변환하는 과정을 'DNS 조회'라고 합니다.

```bash
# [dig로 도메인의 IP 주소 확인] - dig가 nslookup보다 더 상세한 정보를 제공합니다.
dig google.com

# [nslookup으로 간단하게 확인]
nslookup google.com
```
- **ANSWER SECTION**: 이 부분에 보이는 `A` 레코드의 값이 `google.com`의 실제 IP 주소입니다.
- 만약 IP 주소가 제대로 나오지 않는다면, DNS 서버 자체에 문제가 있거나 내 서버의 DNS 설정 (`/etc/resolv.conf`)에 문제가 있을 수 있습니다.

#### 3\. (실용 예) "사이트 접속이 안돼요!" 문제 해결 시나리오

1.  **1단계: `ping`으로 연결성 확인**
    - `ping naver.com` -> 응답이 잘 온다. (네트워크 자체는 살아있다)
2.  **2단계: `dig`로 DNS 확인**
    - `dig naver.com` -> IP 주소가 잘 나온다. (DNS는 정상이다)
3.  **3단계: 특정 포트로 접속 테스트 (`telnet`, `nc`)**
    - 웹사이트는 80(http) 또는 443(https) 포트를 사용합니다. 해당 포트가 막혔을 수 있습니다.
    - `telnet naver.com 80` 또는 `nc -zv naver.com 80`
    - "Connected to..." 메시지가 뜨면 포트가 열려있는 것입니다.
    - 아무 반응이 없다면, 내 서버나 회사 방화벽에서 해당 포트로 나가는 것을 막고 있을 가능성이 큽니다.

```bash
# [telnet, nc 설치]
sudo apt install telnet netcat -y

# [네이버의 80번 포트(HTTP)에 접속 시도]
telnet naver.com 80
# (접속 후 Ctrl + ] 누르고 quit 입력하여 종료)

# [nc로 포트 스캔] - z(zero-I/O)와 v(verbose) 옵션
nc -zv naver.com 80
# "Connection to ... 80 port [tcp/http] succeeded!" 라는 메시지를 확인
``` 